---
export const prerender = false
const { pathname } = Astro.url
const lang = pathname.split('/')[1].split('/')[0]
---

<script>
	const lang = window.location.pathname.split('/')[1].split('/')[0]
	const searchInput = document.getElementById('search') as HTMLInputElement
	const searchButton = document.getElementById(
		'searchButton'
	) as HTMLButtonElement

	const onSearch = () => {
		const search = searchInput.value
		const url = `/${lang}/search?${search}`
		window.location.href = url
	}
	searchInput.addEventListener('keydown', (event) => {
		if (event.key === 'Enter') {
			onSearch()
		}
	})
	searchButton.addEventListener('click', onSearch)
</script>
<header
	class="flex items-center justify-between my-4 mb-4 md:mb-16 flex-wrap gap-4"
>
	<h1>
		<a class="text-2xl font-bold sm:text-3xl text-white" href="/">Tomydev</a>
	</h1>
	<div class="flex items-center justify-end gap-4">
		<div class="flex items-center gap-4">
			<div class="relative">
				<label class="sr-only" for="search">Search</label>

				<input
					class="h-10 w-full rounded-full border-2 border-blueSecondary bg-bluePrimary pe-10 ps-4 text-sm shadow-sm sm:w-56 text-gray-400"
					id="search"
					type="search"
					placeholder="Search post..."
				/>

				<button
					type="button"
					id="searchButton"
					class="absolute end-1 top-1/2 -translate-y-1/2 rounded-full p-2 text-gray-600 transition hover:text-gray-700"
				>
					<span class="sr-only">Search</span>
					<svg
						xmlns="http://www.w3.org/2000/svg"
						class="h-4 w-4"
						fill="none"
						viewBox="0 0 24 24"
						stroke="currentColor"
						stroke-width="2"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
					</svg>
				</button>
			</div>
		</div>
		<a href="https://github.com/tomy08">
			<svg
				xmlns="http://www.w3.org/2000/svg"
				width="35"
				height="35"
				viewBox="0 0 24 24"
				stroke-width="2"
				stroke="currentColor"
				fill="none"
				stroke-linecap="round"
				stroke-linejoin="round"
				class="text-gray-600 transition rounded-full bg-blueSecondary hover:bg-blue-950 p-1"
			>
				<path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
				<path
					d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"
				></path>
			</svg>
		</a>
		<div>
			{
				lang === 'en' ? (
					<a
						href="/es"
						class="bg-gray-900 px-2 py-1 text-lg rounded-sm hover:bg-gray-700 text-gray-50"
					>
						es
					</a>
				) : (
					<a
						href="/en"
						class="bg-gray-900 px-2 py-1 text-lg rounded-sm hover:bg-gray-700 text-gray-50"
					>
						en
					</a>
				)
			}
		</div>
	</div>
</header>
